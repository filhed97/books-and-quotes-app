<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Books</h2>

  <button *ngIf="isLoggedIn" class="btn btn-success" (click)="goToAdd()">
    <i class="fa-solid fa-plus"></i> Add New Book
  </button>
</div>

<!-- Info for non-auth users -->
<div *ngIf="!isLoggedIn" class="alert alert-info">
  Log in to view, add, edit, or delete books.
</div>

<div *ngIf="loading" class="alert alert-info">Loading books...</div>
<div *ngIf="error" class="alert alert-danger">{{ error }}</div>

<div class="table-responsive" *ngIf="!loading && books.length">
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Published</th>
        <th class="text-end" *ngIf="isLoggedIn">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let book of books" class="align-middle">
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>{{ book.published | date:'yyyy-MM-dd' }}</td>
        <td class="text-end" *ngIf="isLoggedIn">
          <button class="btn btn-sm btn-primary me-2" (click)="goToEdit(book)">
            <i class="fa-solid fa-pen"></i>
          </button>
          <button class="btn btn-sm btn-danger" (click)="deleteBook(book.id)">
            <i class="fa-solid fa-trash"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div *ngIf="!loading && isLoggedIn && !books.length" class="alert alert-warning">
  No books found. Click "Add New Book" to create one.
</div>
